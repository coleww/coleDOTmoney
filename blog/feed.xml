<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Cole Willsea</title>
  <subtitle>Cole Codes Cool Code</subtitle>
  <id>http://colewillsea.com/</id>
  <link href="http://colewillsea.com/"/>
  <link href="http://colewillsea.com/feed.xml" rel="self"/>
  <updated>2015-09-22T07:30:00-07:00</updated>
  <author>
    <name>Cole Willsea</name>
  </author>
  <entry>
    <title>Making an Image Bot on Twitter</title>
    <link rel="alternate" href="http://colewillsea.com/blog/making-an-twitter-image-bot.html"/>
    <id>http://colewillsea.com/blog/making-an-twitter-image-bot.html</id>
    <published>2015-09-22T07:30:00-07:00</published>
    <updated>2015-09-22T07:35:35-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;Making an Image Bot on Twitter&lt;/h1&gt;

&lt;h2&gt;Because putting random text on dumb images has been working for the New Yorker for a preeeettty looong time&lt;/h2&gt;

&lt;p&gt;Recently I recorded a screencast in which I created an image bot on Twitter. The bot picks a random noun, searches for images matching &lt;code&gt;&amp;quot;green&amp;quot; + noun&lt;/code&gt;, picks one at random, and tweets it with the text &amp;ldquo;WE GET IT, YOU SMOKE WEED.&amp;rdquo;. Super simple, but often absurdly funny.&lt;/p&gt;

&lt;p&gt;&lt;iframe src="https://player.vimeo.com/video/139794441" width="500" height="313" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt; &lt;p&gt;&lt;a href="https://vimeo.com/139794441"&gt;building a twitter bot about weed&lt;/a&gt; from &lt;a href="https://vimeo.com/colewillsea"&gt;Cole Willsea&lt;/a&gt; on &lt;a href="https://vimeo.com"&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;The source code is up &lt;a href="https://github.com/coleww/we-get-it-you-smoke-weed"&gt;on GitHub&lt;/a&gt; and there has been a bit of improvement to the code that is not in the video. The bot is running live at &lt;a href="https://twitter.com/_WE_GET_IT_BRO_"&gt;@&lt;em&gt;WE&lt;/em&gt;GET&lt;em&gt;IT&lt;/em&gt;BRO_&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a class="twitter-timeline" href="https://twitter.com/_WE_GET_IT_BRO_" data-widget-id="646331147127951360"&gt;Tweets by @&lt;em&gt;WE&lt;/em&gt;GET&lt;em&gt;IT&lt;/em&gt;BRO_&lt;/a&gt;
&lt;script&gt;!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?&amp;#39;http&amp;#39;:&amp;#39;https&amp;#39;;if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+&amp;quot;://platform.twitter.com/widgets.js&amp;quot;;fjs.parentNode.insertBefore(js,fjs);}}(document,&amp;quot;script&amp;quot;,&amp;quot;twitter-wjs&amp;quot;);&lt;/script&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Publishing Web Audio Instruments to npm</title>
    <link rel="alternate" href="http://colewillsea.com/blog/publishing-synthesizers-to-npm.html"/>
    <id>http://colewillsea.com/blog/publishing-synthesizers-to-npm.html</id>
    <published>2015-09-16T08:18:00-07:00</published>
    <updated>2015-09-16T08:31:37-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;Publishing Web Audio Instruments to npm&lt;/h1&gt;

&lt;h2&gt;npm install dubstep&lt;/h2&gt;

&lt;p&gt;The state of web audio in the browser is pretty chill these days, but using it is still very close to that audio metal. Web audio provides excellent core objects like oscillators and filters, but it is up to the user to wire them together. For complex synthesizers and effects this might involve dozens of audioNodes and many lines of code just to get that skrillex monster bass wobbles bumping out your webpage.&lt;/p&gt;

&lt;p&gt;We need a way to publish pre-assembled audio graphs with a consistent API so that our projects don&amp;rsquo;t get taken over by copy pasted audioNode boilerplate.&lt;/p&gt;

&lt;p&gt;This pre-built synth can be thought of just like any other audioNode. It will have &lt;code&gt;start&lt;/code&gt; and &lt;code&gt;stop&lt;/code&gt; functions, a &lt;code&gt;connect&lt;/code&gt; function to send it to the speakers or other nodes. But instead of having audioParams, it will have a &lt;code&gt;keys&lt;/code&gt; function that returns the names of all the audioNodes that make up the synth. You create such a synth by &lt;code&gt;require&lt;/code&gt;&amp;lsquo;ing the module and calling it, passing the audioContext as an argument.&lt;/p&gt;

&lt;p&gt;I have been using the following interface to achieve this dream:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;synth: {
  keys(),

  connect(destination),
  input(),

  start(time),
  stop(time),

  export(),
  import(data),

  audioNodes ...,
  fns? ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;keys()&lt;/code&gt; =&amp;gt; Returns an array of string keys to audioNodes, for example: &lt;code&gt;[&amp;quot;osc1&amp;quot;, &amp;quot;filter&amp;quot;, &amp;quot;distortion&amp;quot;, &amp;quot;gain&amp;quot;]&lt;/code&gt;. One could then do &lt;code&gt;synth[&amp;quot;osc1&amp;quot;].frequency.value = 10000&lt;/code&gt; or whatever you so desire. The naming of these keys is arbitrary but hopefully somehow indicates which type of audioNode they are.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;connect(destination)&lt;/code&gt; =&amp;gt; Connects the output nodes of the synth to a destination or other node.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;input()&lt;/code&gt; =&amp;gt; For an effect or audio processor, this function returns the input node, for example &lt;code&gt;guitar.connect(dubstep.input())&lt;/code&gt;. Of course, you can connect the output of any audioNode to an audioParam on another audioNode like &lt;code&gt;guitar.connect(wobbler.lfo.frequency)&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;start(time)&lt;/code&gt; =&amp;gt; Calls start(time) on all the source nodes. &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;stop(time)&lt;/code&gt; =&amp;gt; Calls stop(time) on all the source nodes. Shhhhhh.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;export()&lt;/code&gt; =&amp;gt; Returns JSON respresentation of the instrument. For easily saving settings between browser sessions.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;import(data)&lt;/code&gt; =&amp;gt; Loads JSON data, or use default values if no data is passed.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;audioNodes ...&lt;/code&gt; =&amp;gt; Each node in the synth will be present as a property on the object, allowing for direct manipulation. Their keys can be found with &lt;code&gt;keys()&lt;/code&gt;. For example, drone-e-o-synth contains the keys &lt;code&gt;[&amp;#39;source&amp;#39;, &amp;#39;filter&amp;#39;, &amp;#39;lowFilter&amp;#39;, &amp;#39;distortion&amp;#39;, &amp;#39;volume&amp;#39;]&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;fns? ...&lt;/code&gt; =&amp;gt; Other arbitrarily named functions might or might not also be present on the object, such as for performing complex control changes that would be unwieldy to do directly, like setting oscillators to play chords, or turning on that dubstep wobble. Presumably the module author would tell you about this magic if it exists.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;p&gt;To use one of these modules you would first &lt;code&gt;npm install&lt;/code&gt; it, probably with a &lt;code&gt;--save-dev&lt;/code&gt; as this is presumably a browserify project and because you want your dependencies to be well documented and to welcome collaboration. In your codes, you might do something like:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;  var makeSynth = require('the-name-of-a-synth-module')
  var context = new (window.AudioContext || window.webkitAudioContext)()
  var synth = makeSynth(context)
  synth.connect(context.destination)
  synth.start()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;At which point a horrible noise would be wailing out of your speakers! A W E S O M E!!!&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Thus far I have made 3 modules in this fashion, each of which includes some sort of strange demo app as well:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.npmjs.com/package/drone-e-o-synth"&gt;drone-e-o-synth&lt;/a&gt; - a drone synth with a bunch of resonance filters and a demo that lets you control them by moving your laptop or phone around.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.npmjs.com/package/tri-tri"&gt;tri-tri&lt;/a&gt; - a weird triangly synth with a fun and noisy video game about color to demonstrate what it sounds like&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.npmjs.com/package/wobbler"&gt;wobbler&lt;/a&gt; - a simple dubstep wobble effect with a demo that lets you tap/click to change the wub wubs.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My hope is that after making a handful or two of these synth modules, it will be possible to quickly &lt;code&gt;npm install&lt;/code&gt;, &lt;code&gt;require()&lt;/code&gt;, and &lt;code&gt;connect&lt;/code&gt; together some reallllllllllly out-there browser synths with &lt;a href="https://www.npmjs.com/package/web-audio-ui"&gt;web-audio-ui&lt;/a&gt;, &lt;a href="https://github.com/substack/browserify-handbook"&gt;Browserify&lt;/a&gt;, and a few lines of code. &lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;a href="openmusic"&gt;https://github.com/openmusic&lt;/a&gt; also provides a collection of very useful audioNodes and web components. Most of my synths include at least one openmusic module, and I find the sample player and oscillator to be indispensable for doing audio work on the web. &lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Logging URLS from IRC to Delicious with Node</title>
    <link rel="alternate" href="http://colewillsea.com/blog/node-irc-url-logger.html"/>
    <id>http://colewillsea.com/blog/node-irc-url-logger.html</id>
    <published>2015-09-08T15:10:00-07:00</published>
    <updated>2015-09-08T15:27:08-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;Logging URLS from IRC to Delicious with Node&lt;/h1&gt;

&lt;h2&gt;Oh you know just plugging some APIs together&lt;/h2&gt;

&lt;p&gt;Like most people, I participate in secret societies through hidden IRC channels. The conversations that take place in these circles are bound by blood, however as the US government has proven it is not actually &amp;ldquo;spying&amp;rdquo; if all you do is collect &amp;ldquo;metadata&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;In this instance, the &amp;ldquo;metadata&amp;rdquo; I am after is any and all URLs that get posted in one of these esoteric chatrooms. Even if I can&amp;rsquo;t keep up on the day to day message logs, I can still peruse the links that others have shared. After all, that is why we are on the internet of course. To hyperlink.&lt;/p&gt;

&lt;p&gt;To that end I wrote a simple node.js bot that sits in some IRC channels, scans any messages it sees for URLs, and posts any that it finds to a Delicious account. &lt;/p&gt;

&lt;p&gt;The source code is as follows:&lt;/p&gt;

&lt;script src="https://gist.github.com/coleww/a9f82ba7f37504bae368.js"&gt;&lt;/script&gt;

&lt;p&gt;You could, for example, have it join every IRC channel about Ember and make a page that is all about what is going on in Ember. That might be cool.&lt;/p&gt;

&lt;p&gt;I picked Delicious because it was the first link I recognized when I searched for &amp;ldquo;bookmark site API&amp;rdquo;, you could in theory have this script post links anywhere you want. It must be noted that I am using &lt;code&gt;childProcess.exec&lt;/code&gt; here to call a CLI tool out of sheer laziness: I am sure there is a &lt;code&gt;require&lt;/code&gt;-able Delicious API wrapper module out there somewhere.&lt;/p&gt;

&lt;p&gt;While making this I was thinking about certain programming language channels where people will often ask for help with bugs. For example:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;&amp;gt; coledubs: what is up with this error "ILLEGAL: FOO"
&amp;gt; derbyshire: wow that sounded awful 
&amp;gt; elephant: coledubs - do a nom bom, that should fix it
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;With a sufficient amount of regex&amp;#39;ing, one could parse the logs of these channels and create automatic Q&amp;amp;A pages. In the example above, it wouldn&amp;rsquo;t be difficult to detect that elephant is answering coledubs&amp;rsquo;s question, and by saving it somehwere this might help someone else down the line who sees an &lt;code&gt;ILLEGAL: FOO&lt;/code&gt; error.  &lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Controlling Electronic Instruments With MIDI and Clojure</title>
    <link rel="alternate" href="http://colewillsea.com/blog/triggering-midi-with-clojure.html"/>
    <id>http://colewillsea.com/blog/triggering-midi-with-clojure.html</id>
    <published>2015-08-30T06:58:00-07:00</published>
    <updated>2015-08-31T07:20:25-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;Controlling Electronic Instruments With MIDI and Clojure&lt;/h1&gt;

&lt;h2&gt;Let Rich Hickey Be Your DJ&lt;/h2&gt;

&lt;p&gt;Most of the time when people are trying to use MIDI in Overtone and Clojure, they just want to play an artisanal hand-coded soft-synth with a standard MIDI keyboard. And there are plenty of helper methods and &lt;a href="https://github.com/overtone/overtone/wiki/midi"&gt;some documentation&lt;/a&gt; to make this easy, but what if you want to use Clojure as a MIDI sequencer for hardware samplers and synthesizers? The same functional-programming and LISP-y principles that make Clojure effective for audio synthesis can be just as powerful when used for audio sequencing. &lt;/p&gt;

&lt;p&gt;Recently I have been working on a &lt;a href="https://github.com/coleww/overtone-live-coding/blob/master/src/my_symphony/sequencer.clj"&gt;probability-based audio sequencer&lt;/a&gt;, which allows you to write music as deeply nested arrays of numbers that are then &amp;ldquo;performed&amp;rdquo; by the computer, resulting in different compositions each time. It is absolutely thrilling to create music by typing integers into emacs, I swear.&lt;/p&gt;

&lt;p&gt;I could of course just have this sequencer control some of the synths that are built into Overtone, but I feel much more comfortable manipulating sounds on actual drum machines and FX pedals. Overtone has very little documentation in regards to sending MIDI signals out to control other devices, but luckily the &lt;a href="https://github.com/overtone/overtone/blob/master/src/overtone/studio/midi.clj"&gt;source code&lt;/a&gt; to the high-level Overtone MIDI module is clearly written and of a reasonable length. &lt;em&gt;Though of course had this blog post existed yesterday I would have just read this and not bothered reading the code at all&amp;hellip; ah, c&amp;#39;est la open source.&lt;/em&gt;&lt;/p&gt;

&lt;h3&gt;LETS ROLL&lt;/h3&gt;

&lt;p&gt;This is what we are trying to achieve: write some sweet sequencing code that sends MIDI data to our hardware instruments, that way we can live code changes to the sequencer and manipulate FX on the instruments directly.&lt;/p&gt;

&lt;blockquote class="instagram-media" data-instgrm-captioned data-instgrm-version="4" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"&gt;&lt;div style="padding:8px;"&gt; &lt;div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"&gt; &lt;div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAGFBMVEUiIiI9PT0eHh4gIB4hIBkcHBwcHBwcHBydr+JQAAAACHRSTlMABA4YHyQsM5jtaMwAAADfSURBVDjL7ZVBEgMhCAQBAf//42xcNbpAqakcM0ftUmFAAIBE81IqBJdS3lS6zs3bIpB9WED3YYXFPmHRfT8sgyrCP1x8uEUxLMzNWElFOYCV6mHWWwMzdPEKHlhLw7NWJqkHc4uIZphavDzA2JPzUDsBZziNae2S6owH8xPmX8G7zzgKEOPUoYHvGz1TBCxMkd3kwNVbU0gKHkx+iZILf77IofhrY1nYFnB/lQPb79drWOyJVa/DAvg9B/rLB4cC+Nqgdz/TvBbBnr6GBReqn/nRmDgaQEej7WhonozjF+Y2I/fZou/qAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=" margin:8px 0 0 0; padding:0 4px;"&gt; &lt;a href="https://instagram.com/p/6_KhLZSaV_/" style=" color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;" target="_top"&gt;Controlling drum machine and keyboard with Clojure over MIDI.&lt;/a&gt;&lt;/p&gt; &lt;p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"&gt;A video posted by coles 2 metal (@cole_dubs) on &lt;time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2015-08-30T00:11:57+00:00"&gt;Aug 29, 2015 at 5:11pm PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;script async defer src="//platform.instagram.com/en_US/embeds.js"&gt;&lt;/script&gt;

&lt;p&gt;First things first: open up a new .clj file and add a namespace declaration:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;  (ns midi-seq.core
    (:require [overtone.live :refer :all]
              [overtone.studio.midi :refer :all]))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will pull in overtone and the midi functions we need. Next connect your computer to your hardware audio device with some sort of a USB-to-MIDI cable. Make sure you do this before launching Overtone, as it will only register MIDI devices that are found on boot up.&lt;/p&gt;

&lt;p&gt;Next, use &lt;code&gt;cider-jack-in&lt;/code&gt; to connect to a REPL. I use &lt;a href="https://github.com/overtone/emacs-live"&gt;emacs live&lt;/a&gt; for all my Clojure hacking, and it integrates very well with Overtone. Evaluate the namespace to load all the requires, and then if you run &lt;code&gt;(midi-connected-receivers)&lt;/code&gt; you should see your MIDI output device listed. If this function returns nothing then something went horribly wrong and I cannot help you, sorry! &lt;/p&gt;

&lt;p&gt;The way you send out a midi-note is to use the function called, um, &lt;code&gt;midi-note&lt;/code&gt;, and it takes the following arguments: &lt;code&gt;receiver midi-note velocity(0-127) duration(s) channel&lt;/code&gt;, with channel being optional. You might notice that &lt;code&gt;(first (midi-connected-receivers))&lt;/code&gt; contains a key called &lt;code&gt;:receiver&lt;/code&gt; that points to some kind of MIDI output object and so you might also guess that the &lt;code&gt;midi-note&lt;/code&gt; function is expecting that as it&amp;rsquo;s receiver argument, and you would be incorrect, much like I was. It just wants that whole entire receiver object for some reason. That&amp;rsquo;s cool. &lt;/p&gt;

&lt;p&gt;If we are hooked up to a synthesizer, we can play a C4 note (a.k.a. MIDI note 60) at full velocity for 1 second like so:&lt;/p&gt;
&lt;pre class="highlight clojure"&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;midi-note&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;first&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;midi-connected-receivers&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Hopefully you only have the one MIDI receiver connected, but if there are multiple outputs listed then you will have to figure out which one is correct through trial and error or a lucky guess. I assume that if you have multiple MIDI outputs you know what you are doing here. Cheers. &lt;/p&gt;

&lt;h4&gt;A pro-tip for creative technologists:&lt;/h4&gt;

&lt;p&gt;Programmers like to zero-index EVERYTHING because that is the computer science way of doing things. However, consumer audio equipment tends to number things 1-10. For example, my Boss SP-303 sampler says that it will respond to events on channel 10, but for Overtone that is actually channel 9 i.e, &lt;code&gt;(midi-note (first (midi-connected-receivers)) 96 127 1 9)&lt;/code&gt;. If you are ever trying to hook things together through some sort of integer/index/channel and nothing is working, consider the possibility that the two sides hold differing opinions on how to count to ten. &lt;/p&gt;

&lt;h4&gt;WHAT ELSE CAN MY COMPUTER CONTROL?&lt;/h4&gt;

&lt;p&gt;MIDI can initiate program changes, modulate effects, start, stop, and change sequences, and much more. But you will probably need to read a lot of MIDI implementation specs and the Overtone MIDI source code in order to figure out what data to send to do those things. I was trying to do something as simple as changing the selected pad bank on my Boss SP-505 and gave up after scouring the &lt;a href="http://sp-forums.com/viewtopic.php?f=7&amp;amp;t=10941&amp;amp;start=0"&gt;many&lt;/a&gt;, &lt;a href="http://forums.rolandclan.com/viewtopic.php?f=16&amp;amp;t=34352"&gt;many&lt;/a&gt;, &lt;a href="http://www.vsplanet.com/ubbthreads/ubbthreads.php?ubb=showflat&amp;amp;Number=210137"&gt;many&lt;/a&gt;, &lt;a href="https://www.gearslutz.com/board/electronic-music-instruments-electronic-music-production/783954-boss-sp-505-question.html"&gt;many&lt;/a&gt;, &lt;a href="http://www.vdrums.com/forum/advanced/technical/11801-triggering-samples-with-a-boss-sp-505-sampler"&gt;many&lt;/a&gt; unanswered threads about this subject.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>TDD for the Lazy, Patient, and Messy</title>
    <link rel="alternate" href="http://colewillsea.com/blog/tdd-for-the-lazy-patient-and-messy.html"/>
    <id>http://colewillsea.com/blog/tdd-for-the-lazy-patient-and-messy.html</id>
    <published>2015-08-26T07:37:00-07:00</published>
    <updated>2015-08-30T12:47:21-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;TDD for the lazy, patient, and messy&lt;/h1&gt;

&lt;h2&gt;Because sometimes, doing things in potentially unbounded time is still &amp;ldquo;fast enough&amp;rdquo;&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;&lt;img alt="tdd" src="/blog/images/tdd-ada878d8.png" /&gt;&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;TDD is a very important software engineering buzz word that you should be able to define so that people think that you know what you are doing. Here is some text I copied from &lt;a href="https://en.wikipedia.org/wiki/Test-driven_development"&gt;wikipedia&lt;/a&gt;:&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Test-driven development (TDD) is a software development process that relies on the repetition of a very short development cycle: &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;first the developer writes an (initially failing) automated test case that defines a desired improvement or new function, &lt;/li&gt;
&lt;li&gt;then produces the minimum amount of code to pass that test, &lt;/li&gt;
&lt;li&gt;and finally refactors the new code to acceptable standards.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;p&gt;&lt;center&gt;&lt;img alt="test-driven" src="/blog/images/tdn-7048caca.png" /&gt;&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;A lot of people talk a lot of things about TDD. There are those that talk about TDD as their jobs. There are even meta-TDD consultants who talk to management about talking to their employees about TDD. But while it is easy to spew empty platitudes at developers, it is much harder to figure out how to use this knowledge in your day to day software engineering. Some skills can only be gained through practice, experience, and pain. However there are those rare techniques and stategies that can be effectively utilized on every project.&lt;/p&gt;

&lt;p&gt;Recently I discovered one such technique while working on a &lt;a href="https://github.com/gigasquid/wonderland-clojure-katas"&gt;code kata in clojure&lt;/a&gt;. The challenge was to compute a magic square: given a bunch of floating point numbers, you must arrange them in a 2-dimensional array such that every row, column, and diagonal of the matrix/square a sum up to the same &amp;ldquo;magic number&amp;rdquo;. &lt;/p&gt;

&lt;p&gt;&lt;img alt="magic square" src="/blog/images/magic-d40ea8db.png" /&gt;&lt;/p&gt;

&lt;p&gt;There are similar games in most newspapers. Some people solve puzzles like this to keep their mind sharp, while programmers write scripts that solve these puzzles to stay sharp in a language. Weird.&lt;/p&gt;

&lt;p&gt;The tests for this kata looked like this:&lt;/p&gt;
&lt;pre class="highlight clojure"&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sum-rows&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;reduce&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;%&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;

&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sum-cols&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="nb"&gt;reduce&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;first&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;
   &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;reduce&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;second&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;
   &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;reduce&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;last&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;))])&lt;/span&gt;&lt;span class="w"&gt;

&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sum-diagonals&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="nb"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;get-in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;get-in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;get-in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;&lt;span class="w"&gt;
   &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;get-in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;get-in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;get-in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]))])&lt;/span&gt;&lt;span class="w"&gt;

&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;deftest&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test-magic-square&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;testing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"all the rows, columns, and diagonal add to the same number"&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;sum-rows&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;magic-square&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;&lt;span class="w"&gt;
           &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;sum-cols&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;magic-square&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;&lt;span class="w"&gt;
           &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;sum-diagonals&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;magic-square&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;)))))&lt;/span&gt;&lt;span class="w"&gt;

    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;
           &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;sum-rows&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;magic-square&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="w"&gt;
           &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;sum-cols&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;magic-square&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="w"&gt;
           &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;sum-diagonals&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;magic-square&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;))))))))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There are some helper functions to sum the rows, columns, and diagonals of a 2-d matrix, as well as a test that runs those helpers to check that the return value is actually a magic square. Because this is functional programming, there is no state and our function is expected to be pure, so it should always returns the same output for a given input and has no side effects.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;m sure there is some really clever solution to solve this problem instantly, or at the very least some way to construct an optimized tree or queue or stack or some other horrifying software-interview-whiteboarding-question data-structure, but in this case it is really easy to just copy-paste the &lt;code&gt;sum-___&lt;/code&gt; functions into our src file and randomly shuffle the values around until you get a valid arrangement:&lt;/p&gt;
&lt;pre class="highlight clojure"&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;make-a-square&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;mapv&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;%&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;partition&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;shuffle&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That example might be a little confusing, lets thread that s-expression with the &lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; macro. &lt;em&gt;queries emacs manual&lt;/em&gt; &lt;code&gt;C-c RET t-l&lt;/code&gt;!&lt;/p&gt;
&lt;pre class="highlight clojure"&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;make-a-square&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;-&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; 
    &lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;; we take the values
&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;shuffle&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;; we shuffle them
&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;partition&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;; we partition them into 3 element arrays
&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;mapv&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;%&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;; finally, we convert the lists into vectors
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can take a peak at &lt;a href="https://github.com/coleww/wonderland-clojure-katas/tree/coles-solution/magic-square"&gt;all the code&lt;/a&gt;, but essentially we call &lt;code&gt;make-a-square&lt;/code&gt; in a loop until it randomly happens upon a result that passes all the copy pasta&amp;rsquo;d magic square tests, then we return that result to the magic square tests, which all pass because the result has already been tested, and you have green dots my friend!&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;img alt="chill, passing tests" src="/blog/images/chill-a5cbed19.png" /&gt;&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;Now lets not celebrate just yet. This function we have created might not always be pure for every given input! If a set of numbers had multiple magic-square arrangements then we might return any one of them. This is an utter betrayal of the principles and philosophies of functional programming, but I&amp;rsquo;m gonna let it slide in this instance. &lt;/p&gt;

&lt;p&gt;Perhaps more troubling is the fact that this algorithm could potentially take until the-sun-burns-out-into-a-dull-husk-and-all-life-on-earth-ceases to find a correct result. That&amp;rsquo;s ok though, Ruby on Rails has similar speeds yet it is very popular and used by many important businesses. &lt;/p&gt;

&lt;p&gt;Furthermore, despite it&amp;rsquo;s potential for random sluggishness this script is still usually way faster than your human meat brain can even begin to comprehend. The &lt;a href="http://www.nngroup.com/articles/response-times-3-important-limits/"&gt;Nielsen Norman Group&lt;/a&gt; lays out some important limits in software response times:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;0.1 second is about the limit for having the user feel that the system is reacting instantaneously, meaning that no special feedback is necessary except to display the result.&lt;/p&gt;

&lt;p&gt;1.0 second is about the limit for the user&amp;rsquo;s flow of thought to stay uninterrupted, even though the user will notice the delay&amp;hellip;&lt;/p&gt;

&lt;p&gt;10 seconds is about the limit for keeping the user&amp;rsquo;s attention focused on the dialogue. For longer delays, users &amp;hellip; should be given feedback indicating when the computer expects to be done&amp;hellip;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Therefore if you can, on average, usually come up with a randomized solution to your problem in under 10 seconds, then that is a reasonable solution to your problem! Remember! Our definition of TDD stated that the last step is refactoring your code, but it never says that you have to do that refactoring immediately! This is an agile shop of course, we&amp;rsquo;ll deal with fixing that in another sprint, just slap a spinner on it and call it a day.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;img alt="spinners" src="/blog/images/spinnerz-e308d24c.gif" /&gt;&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;We were particularly lucky here in that the kata did not require handling the case of being passed a list of numbers for which there is no magic square. If that test was added, our function would run forever and ever, never ever returning anything. In a real world deployment of the magic square algorithm we would certainly need to improve things by adding a timeout that detects if no magic square has been found after a healthy amount of time, and does something accordingly. &lt;/p&gt;

&lt;p&gt;I hope you have learned a trick or two in this lesson. If I could present a succint &lt;code&gt;tl;dr&lt;/code&gt; version, it would be this: &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;the most important thing is to have passing tests, even if that means breaking your code to do it.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;:clap-emoji:&lt;/em&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Throwing Good Errors With JavaScript</title>
    <link rel="alternate" href="http://colewillsea.com/blog/throwing-errs-js.html"/>
    <id>http://colewillsea.com/blog/throwing-errs-js.html</id>
    <published>2015-08-20T15:09:00-07:00</published>
    <updated>2015-08-26T07:46:12-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;Throwing Good Errors With JavaScript&lt;/h1&gt;

&lt;h2&gt;Putting the &amp;ldquo;roar&amp;rdquo; in &amp;ldquo;erroars&amp;rdquo;&lt;/h2&gt;

&lt;p&gt;As you may already know, error handling is very important in an asynchronous language such as JavaScript. You probably have callbacks nested inside of each other so intricately that it is impossible to know what is calling what, let alone where errors might emerge from, and the only way to get a handle on this mess is to make sure that all of your callbacks accept &lt;code&gt;err&lt;/code&gt; as their first argument. That way you are both reminded and forced to handle errors when they happen, rather than allowing them to bubble up towards the user in unexpected ways.&lt;/p&gt;

&lt;p&gt;Maybe you already have a handle on handling errors: you &lt;code&gt;console.log&lt;/code&gt; the unimportant ones, and halt the entire program on the really bad ones. But what do you do when you are writing code that needs to throw a special sort of error itself? JavaScript has some &lt;a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types"&gt;built-in error types&lt;/a&gt;, but like everything in JavaScript they are a little wonky. And maybe you need something a little bit more specialized, or want to include additional debugging information.&lt;/p&gt;

&lt;p&gt;For this task, we can wire up a simple custom error by hand! Lets see some stinking code:&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="c1"&gt;// First we define a function. &lt;/span&gt;
&lt;span class="c1"&gt;// By convention, it should be capitalized-camel-case &lt;/span&gt;
&lt;span class="c1"&gt;// and end with the word "Error". &lt;/span&gt;
&lt;span class="c1"&gt;// This function can take arguments, &lt;/span&gt;
&lt;span class="c1"&gt;// or not, &lt;/span&gt;
&lt;span class="c1"&gt;// whatever you want, &lt;/span&gt;
&lt;span class="c1"&gt;// it's JavaScript after all!&lt;/span&gt;
&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;TheNameOfYourErrorGoesHereError&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="c1"&gt;// Give your error a name!&lt;/span&gt;
  &lt;span class="c1"&gt;// This should probably be the same as the name of the function,&lt;/span&gt;
  &lt;span class="c1"&gt;// It is what will show up when the error gets thrown.&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'TheNameOfYourErrorGoesHereError'&lt;/span&gt;

  &lt;span class="c1"&gt;// A helpful message about what went wrong!&lt;/span&gt;
  &lt;span class="c1"&gt;// You might want to include data from the arguments,&lt;/span&gt;
  &lt;span class="c1"&gt;// or explain how to fix things.&lt;/span&gt;
  &lt;span class="c1"&gt;// A link to a blog post/issue tracker/docs might also be nice!&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'My friend:\n  There seems to have been an issue with:\n  '&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;msg&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;'\n  Please amend it at your earliest convenience.\nThank You.'&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// Next, we use prototypal inheritance to make our error function&lt;/span&gt;
&lt;span class="c1"&gt;// inherit from the plain ole vanilla Error object.&lt;/span&gt;
&lt;span class="c1"&gt;// This will give it all the properties of an Error,&lt;/span&gt;
&lt;span class="c1"&gt;// making it throwable and probably some other things.&lt;/span&gt;
&lt;span class="nx"&gt;TheNameOfYourErrorGoesHereError&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nb"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;// Lastly, we set the constructor &lt;/span&gt;
&lt;span class="c1"&gt;// of the prototype &lt;/span&gt;
&lt;span class="c1"&gt;// of our custom error function &lt;/span&gt;
&lt;span class="c1"&gt;// (which is now a basic Error) &lt;/span&gt;
&lt;span class="c1"&gt;// to be our custom error function itself. &lt;/span&gt;
&lt;span class="nx"&gt;TheNameOfYourErrorGoesHereError&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;constructor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;TheNameOfYourErrorGoesHereError&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;By setting the constructor of the prototype to be the custom error function, we make it so that calls to &lt;code&gt;new TheNameOfYourErrorGoesHereError(&amp;#39;problems!&amp;#39;)&lt;/code&gt; will call it to create the new &lt;code&gt;Error&lt;/code&gt; object, which is really just yr average object with name and message attributes and some other special functions, so our function satisfies the &lt;code&gt;Error&lt;/code&gt; interface because it has a name and a message and descends from &lt;code&gt;Error&lt;/code&gt;, which is of course itself an &lt;code&gt;Error&lt;/code&gt;!&lt;/p&gt;

&lt;p&gt;This makes JavaScript happy, so now when a problem comes up in our code we can deal with it like so:&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;ACatastrophicProblemHasArisenError&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And everything will work magically because &lt;code&gt;throw&lt;/code&gt; expects to be passed an &lt;code&gt;Error&lt;/code&gt;, and our function satisfies these demands due to it&amp;rsquo;s prototypal ancestry. A W E S O M E !&lt;/p&gt;

&lt;h2&gt;BE KIND TO THE USER, THROW GOOD ERRORS!&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;&lt;img alt="tron: fight for the users" src="/blog/images/tron-e382280c.jpg" /&gt;&lt;/center&gt;&lt;/p&gt;
</content>
  </entry>
</feed>
