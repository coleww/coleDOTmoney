<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Blog Name</title>
  <subtitle>Blog subtitle</subtitle>
  <id>http://blog.url.com/</id>
  <link href="http://blog.url.com/"/>
  <link href="http://blog.url.com/feed.xml" rel="self"/>
  <updated>2015-06-22T20:21:00-07:00</updated>
  <author>
    <name>Blog Author</name>
  </author>
  <entry>
    <title>automating bots with cron on digital ocean</title>
    <link rel="alternate" href="http://blog.url.com/blog/do-cron.html"/>
    <id>http://blog.url.com/blog/do-cron.html</id>
    <published>2015-06-22T20:21:00-07:00</published>
    <updated>2015-06-24T22:39:37-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;automating bots with cron on digital ocean&lt;/h1&gt;

&lt;h2&gt;because setInterval is probably not the right thing to do&lt;/h2&gt;

&lt;p&gt;I used to deploy all my bots to Heroku, running in constant loops on those sweet sweet free single dynos.&lt;/p&gt;

&lt;p&gt;They looked something like this:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;    &lt;span class="kp"&gt;loop&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="c1"&gt;# do some stuff&lt;/span&gt;
        &lt;span class="no"&gt;BOT&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;funny_tweet_lol&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="nb"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;10800&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;rand&lt;/span&gt; &lt;span class="mi"&gt;5400&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is&amp;hellip;not optimal for a number of reasons. But since I could create new Heroku apps for free from the command line it was super easy, and, well, why not. I even made a &lt;a href="https://github.com/coleww/twitter_bot_generator"&gt;twitter bot generator ruby gem&lt;/a&gt; around the concept. Don&amp;rsquo;t judge me.&lt;/p&gt;

&lt;p&gt;With deng near fifty of these things running, I was not much pleased to hear about the new Heroku pricing plan. Though of course I couldn&amp;rsquo;t get mad cuz it was free servers in the first place. While I could have meticulously gone through all my Heroku apps and updated them to not loop/sleep forever and instead scheduled the scripts to run at various intervals, I figured it was finally time to get close to that cloud server metal and put together a lil droplet for myself in the Digital Ocean.&lt;/p&gt;

&lt;p&gt;There are many tutorials on setting up virtual servers, but I found that the biggest pain point in the process was getting my scripts to run on a schedule with cron.  It turns out that cron jobs are run with a very minimal environment setup, for reasons that I guess are cool. You can look up why but honestly it&amp;rsquo;s totally boring.&lt;/p&gt;

&lt;p&gt;&lt;img alt="corn" src="/blog/images/corn.jpg" /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;WHY IS THERE NO NODE.JS HERE?!&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Even though I had installed all the nodes and rubies, my cron seemed to just ignore them. I thought that was quite rude. To fix this, you just need to export your path. Enter &lt;code&gt;echo PATH=$PATH&lt;/code&gt; and copy paste the output into your crontab.&lt;/p&gt;

&lt;p&gt;This was what I saw:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;root@1404-64:~# echo PATH=$PATH
PATH=/root/.nvm/versions/v0.12.2/bin:/usr/local/rvm/gems/ruby-2.2.1/bin:/usr/local/rvm/gems/ruby-2.2.1@global/bin:/usr/local/rvm/rubies/ruby-2.2.1/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/local/rvm/bin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And just dump it in the &lt;code&gt;crontab -e&lt;/code&gt; before your job listings.&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;#
# For more information see the manual pages of crontab(5) and cron(8)
#
# m h  dom mon dow   command
PATH=/root/.nvm/versions/v0.12.2/bin:/usr/local/rvm/gems/ruby-2.2.1/bin:/usr/local/rvm/gems/ruby-2.2.1@global/bin:/usr/local/rvm/rubies/ruby-2.2.1/bin:/usr$
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;.././../././relative paths :&amp;lt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now I had node, but my require(&amp;rsquo;./module&amp;rsquo;) calls didn&amp;rsquo;t seem to work! Cron apparently is not only PATHless but also pathless. My crons looked something like &lt;code&gt;* * * * * node bots/lolbot/bot.js &amp;gt;&amp;gt; ~/lol.log&lt;/code&gt; but in order to correctly set my working path, I just had to &lt;code&gt;cd&lt;/code&gt; into the parent directory before running the script, like so: &lt;code&gt;* * * * * cd bots/lolbot &amp;amp;&amp;amp; node bot.js &amp;gt;&amp;gt; ~/lol.log&lt;/code&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;This &amp;ldquo;blog post&amp;rdquo; was &lt;a href="https://twitter.com/colewillsea/lists/my-robots"&gt;tested&lt;/a&gt; on a 512MB Ram20GB SSD Disk Ubuntu 14.04 x64 Digital Ocean droplet but will probably apply for pretty much any linux-y system anywhere.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Eating Glue</title>
    <link rel="alternate" href="http://blog.url.com/blog/eating-glue-and-paste.html"/>
    <id>http://blog.url.com/blog/eating-glue-and-paste.html</id>
    <published>2015-06-03T16:37:00-07:00</published>
    <updated>2015-06-06T11:57:37-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;EATING GLUE&lt;/h1&gt;

&lt;h2&gt;Taking Over the Paste Event&lt;/h2&gt;

&lt;p&gt;Though they started out as simple document viewers, over the years web browsers have escaped from their sandbox and gained more and more access to operating system level goodness, like your camera and GPS coordinates. This level of intrusivenes used to only be possible for those with the skills and courage to wield awkward Flash hacks, but today this sort of stuff is made available through simple JavaScript APIs to every website you visit. &lt;em&gt;Awesome.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img alt="Ralph likes to hack JavaScript" src="/blog/images/paste.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;One basic computer technology that we can hijack and manipulate however we please is pasting. Some people think it&amp;rsquo;s wrong to mess with fundamental UI behavior like clicking or scrolling or, I suppose, &lt;code&gt;ctrl+v&lt;/code&gt;, but I say SHOW ME THE CODE:&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;    &lt;span class="c1"&gt;// take over any paste event that occurs on this page&lt;/span&gt;
    &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;body&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'paste'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
      &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;clipboardData&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getData&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'text/plain'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

      &lt;span class="nx"&gt;alert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'YOU TRIED TO PASTE '&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;', TOO BAD.'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt; &lt;span class="c1"&gt;// don't let the normal "paste" event happen&lt;/span&gt;
    &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And that&amp;rsquo;s it!&lt;/p&gt;

&lt;p&gt;&lt;a href="http://stackoverflow.com/questions/6035071/intercept-paste-event-in-javascript"&gt;According to my in depth research into this subject&lt;/a&gt; you need to use &lt;code&gt;window.clipboardData.getData(&amp;#39;Text&amp;#39;)&lt;/code&gt; in IE, or &lt;code&gt;e.originalEvent.clipboardData&lt;/code&gt; if you install the event handler with something called &amp;ldquo;Jquery&amp;rdquo;.&lt;/p&gt;

&lt;h4&gt;ok but why&lt;/h4&gt;

&lt;p&gt;I used this trick to build a &lt;a href="http://coleww.github.io/json-formatter/"&gt;JSON formatter&lt;/a&gt; [&lt;a href="https://github.com/coleww/json-formatter"&gt;code&lt;/a&gt;] because I wanted to quickly paste a JSON blob to the page and see it transformed, and an input field or textarea would just get in the way of things. Most JSON formatters on the web are laden with options and advertisements, but all I really needed was a quick way to inspect API responses.&lt;/p&gt;

&lt;p&gt;By hacking the paste event, I was able to take something that looked like this:&lt;/p&gt;

&lt;p&gt;&lt;img alt="before" src="/blog/images/json-og.png" /&gt;&lt;/p&gt;

&lt;p&gt;And make it work more like this:&lt;/p&gt;

&lt;p&gt;&lt;img alt="after" src="/blog/images/json-example.gif" /&gt;&lt;/p&gt;

&lt;p&gt;This approach is well aligned with the UNIX philosophy, which holds among it&amp;rsquo;s tenets &amp;ldquo;make small things&amp;rdquo; and &amp;ldquo;text in/text out&amp;rdquo;. Only in this instance, input is handled by the paste event and the output is a div. The web page itself does only one thing and nothing else (literally, there isn&amp;rsquo;t even a title or attribution) which means it composes well with other &amp;ldquo;modules&amp;rdquo; in the browser, like for example using &lt;code&gt;cmd+f&lt;/code&gt; to find things in the formatted JSON. And if I needed to add an option for controlling the indentation level or something I could perhaps add it as a query param in the URL.&lt;/p&gt;

&lt;p&gt;The JSON formatter is actually just a wrapper around a node module called &lt;a href="https://github.com/JerrySievert/json"&gt;json-nice&lt;/a&gt;, and there are probably many other small command line tools that could benefit from being turned into tiny web apps. With &lt;a href="https://github.com/substack/browserify-handbook"&gt;browserify&lt;/a&gt; and &lt;a href="http://maxogden.com/node-packaged-modules.html"&gt;npm&lt;/a&gt; this becomes really easy.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>100% EZ Syntax Highlighting With Middleman</title>
    <link rel="alternate" href="http://blog.url.com/blog/syntax-highlighting-in-middleman.html"/>
    <id>http://blog.url.com/blog/syntax-highlighting-in-middleman.html</id>
    <published>2015-05-30T12:12:00-07:00</published>
    <updated>2015-05-31T11:46:14-07:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h1&gt;100% EZ Syntax Highlighting With Middleman&lt;/h1&gt;

&lt;h2&gt;A Meta Blog About This Middleman Blog&lt;/h2&gt;

&lt;p&gt;I just got these nifty syntax-highlighted-code-blocks working so I thought to myself &amp;ldquo;why not write a blog about setting up my blog? what could possibly be more fascinating?&amp;rdquo;. The answers to those questions being &amp;ldquo;there is no reason not to&amp;rdquo; and &amp;ldquo;nothing&amp;rdquo; respectively.&lt;/p&gt;

&lt;p&gt;We&amp;rsquo;ll be using the &lt;a href="https://github.com/middleman/middleman-syntax"&gt;middleman-syntax gem&lt;/a&gt; in a standard, run-of-the-mill, fresh from the generator, uncustomized Middleman project.&lt;/p&gt;

&lt;h4&gt;Step 1: Add some gems to the &lt;code&gt;/Gemfile&lt;/code&gt; and &lt;code&gt;bundle install&lt;/code&gt;&lt;/h4&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;    &lt;span class="n"&gt;gem&lt;/span&gt; &lt;span class="s2"&gt;"middleman-syntax"&lt;/span&gt;
    &lt;span class="n"&gt;gem&lt;/span&gt; &lt;span class="s2"&gt;"redcarpet"&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;middleman-syntax will work with other markdown parsers, but if you&amp;rsquo;re at all like me you don&amp;rsquo;t really care what is parsing your markdown, so I went with &lt;a href="https://github.com/vmg/redcarpet"&gt;redcarpet&lt;/a&gt; because it&amp;rsquo;s what Github uses and that&amp;rsquo;s usually where I&amp;rsquo;m writing markdown.&lt;/p&gt;

&lt;h4&gt;Step 2: Add these lines to the bottom of &lt;code&gt;/config.rb&lt;/code&gt;&lt;/h4&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;    &lt;span class="n"&gt;activate&lt;/span&gt; &lt;span class="ss"&gt;:syntax&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="ss"&gt;:markdown_engine&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:redcarpet&lt;/span&gt;
    &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="ss"&gt;:markdown&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:fenced_code_blocks&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:smartypants&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;fenced_code_blocks&lt;/code&gt; adds a familiar and pretty background to help set your code blocks apart from the mere plain text that surrounds them. I have absolutely no idea what &lt;code&gt;smartypants&lt;/code&gt; is and the &lt;a href="https://middlemanapp.com/basics/template_engine_options/"&gt;middleman docs&lt;/a&gt; aren&amp;rsquo;t much help in this area, but I left it set to true because why wouldn&amp;rsquo;t you want a pair of smart pants?&lt;/p&gt;

&lt;h4&gt;Step 3: Create a file name &lt;code&gt;highlighting.css.erb&lt;/code&gt; inside &lt;code&gt;/source/stylesheets&lt;/code&gt; and add this line&lt;/h4&gt;
&lt;pre class="highlight erb"&gt;&lt;code&gt;    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="no"&gt;Rouge&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Themes&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:scope&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;'.highlight'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href="https://github.com/jneen/rouge"&gt;Rouge&lt;/a&gt; is the actual library doing the syntax highlighting, and the documentation tells me that you can also try out these themes: &lt;code&gt;ThankfulEyes&lt;/code&gt;, &lt;code&gt;Colorful&lt;/code&gt;, &lt;code&gt;Github&lt;/code&gt;, &lt;code&gt;Base16&lt;/code&gt;, &lt;code&gt;Base16::Solarized&lt;/code&gt;, &lt;code&gt;Base16::Monokai&lt;/code&gt;, &lt;code&gt;Monokai&lt;/code&gt;. I went with Github in the hopes that it would help make developers feel at home reading my blog.&lt;/p&gt;

&lt;h4&gt;Step 4: Reference the generated CSS in the head tag of your &lt;code&gt;/source/layout.erb&lt;/code&gt; file&lt;/h4&gt;
&lt;pre class="highlight erb"&gt;&lt;code&gt;    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;stylesheet_link_tag&lt;/span&gt; &lt;span class="s2"&gt;"highlighting"&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Middleman, much like Rails, has an asset pipeline which you can probably use to mix this file in with your other styles and export into a single minified, uglified, bonafide, electrified six-car monorail. But I don&amp;rsquo;t really understand CSS stuff (I mean, just &lt;em&gt;look&lt;/em&gt; at this website) so ask someone else about that.&lt;/p&gt;

&lt;h4&gt;Step 5: Write about some code!&lt;/h4&gt;

&lt;p&gt;You now can use code blocks in your markdown and get awesome highlighted syntax! Just use the triple backticks markdown blocks, and put the language name after the first set of backticks, like so:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;    ```ruby
        puts "YOU ARE A CHAMPION NOW!"
    ```
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A full list of supported languages/syntaxes can be found &lt;a href="https://github.com/jneen/rouge/wiki/List-of-supported-languages-and-lexers"&gt;here&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
</feed>
